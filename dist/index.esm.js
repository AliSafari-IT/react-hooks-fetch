import{Component as t,useState as r,useCallback as n}from"react";var e=function(t){var r,n;function e(){var r;return(r=t.apply(this,arguments)||this).state={error:null},r.retry=function(){r.setState({error:null})},r}return n=t,(r=e).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,e.getDerivedStateFromError=function(t){return{error:t}},e.prototype.render=function(){var t=this.state.error,r=this.props,n=r.children,e=r.fallback;return t?"function"==typeof e?e(t,this.retry):e:n},e}(t);"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var o=function(t){return"object"==typeof t&&null!==t};function u(t,r){var n=new Map,e=new WeakMap;r&&r.forEach(function(t){o(t.input)?e.set(t.input,function(){return t.result}):n.set(t.input,function(){return t.result})});var u=function(r){var n=null,e=null,o=null;return n=function(){try{var u=function(t,r){try{var n=t()}catch(t){return r(!0,t)}return n&&n.then?n.then(r.bind(null,!1),r.bind(null,!0)):r(!1,n)}(function(){return function(t,r){try{var n=t()}catch(t){return r(t)}return n&&n.then?n.then(void 0,r):n}(function(){return Promise.resolve(t(r)).then(function(t){e=t})},function(t){o=t})},function(t,r){if(n=null,t)throw r;return r});return Promise.resolve(u&&u.then?u.then(function(){}):void 0)}catch(t){return Promise.reject(t)}}(),function(){if(n)throw n;if(null!==o)throw o;return e}};return{prefetch:function(t){o(t)?e.has(t)||e.set(t,u(t)):n.has(t)||n.set(t,u(t))},evict:function(t){o(t)?e.delete(t):n.delete(t)},getResult:function(t){var r=o(t)?e.get(t):n.get(t);if(!r)throw new Error("call prefetch in advance");return r()}}}function i(t,e){var o=r(function(){if(void 0!==e)return t.getResult(e)}),u=o[1];return[o[0],n(function(r){t.prefetch(r),u(function(){return t.getResult(r)})},[t])]}export{e as ErrorBoundary,u as createFetchStore,i as useFetch};
//# sourceMappingURL=index.esm.js.map
