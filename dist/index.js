var t=require("react"),r=function(t){var r,e;function n(){var r;return(r=t.apply(this,arguments)||this).state={error:null},r.retry=function(){r.setState({error:null})},r}return e=t,(r=n).prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e,n.getDerivedStateFromError=function(t){return{error:t}},n.prototype.render=function(){var t=this.state.error,r=this.props,e=r.children,n=r.fallback;return t?"function"==typeof n?n(t,this.retry):n:e},n}(t.Component);"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var e=function(t){return"object"==typeof t&&null!==t};exports.ErrorBoundary=r,exports.createFetchStore=function(t,r){var n=new Map,o=new WeakMap;r&&r.forEach(function(t){e(t.input)?o.set(t.input,function(){return t.result}):n.set(t.input,function(){return t.result})});var u=function(r){var e=null,n=null,o=null;return e=function(){try{var u=function(t,r){try{var e=t()}catch(t){return r(!0,t)}return e&&e.then?e.then(r.bind(null,!1),r.bind(null,!0)):r(!1,e)}(function(){return function(t,r){try{var e=t()}catch(t){return r(t)}return e&&e.then?e.then(void 0,r):e}(function(){return Promise.resolve(t(r)).then(function(t){n=t})},function(t){o=t})},function(t,r){if(e=null,t)throw r;return r});return Promise.resolve(u&&u.then?u.then(function(){}):void 0)}catch(t){return Promise.reject(t)}}(),function(){if(e)throw e;if(null!==o)throw o;return n}};return{prefetch:function(t){e(t)?o.has(t)||o.set(t,u(t)):n.has(t)||n.set(t,u(t))},evict:function(t){e(t)?o.delete(t):n.delete(t)},getResult:function(t){var r=e(t)?o.get(t):n.get(t);if(!r)throw new Error("call prefetch in advance");return r()}}},exports.useFetch=function(r,e){var n=t.useState(function(){if(void 0!==e)return r.getResult(e)}),o=n[1];return[n[0],t.useCallback(function(t){r.prefetch(t),o(function(){return r.getResult(t)})},[r])]};
//# sourceMappingURL=index.js.map
